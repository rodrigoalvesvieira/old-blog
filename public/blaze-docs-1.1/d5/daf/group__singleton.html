<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Singleton</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Singleton<div class="ingroups"><a class="el" href="../../d4/d3a/group__util.html">Utility module</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d31/classblaze_1_1Dependency.html">blaze::Dependency&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lifetime dependency on a singleton object.The <a class="el" href="../../d4/d31/classblaze_1_1Dependency.html" title="Lifetime dependency on a singleton object.The Dependency template class represents a lifetime depende...">Dependency</a> template class represents a lifetime dependency on a singleton object based on the Blaze <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> functionality. By use of the <a class="el" href="../../d4/d31/classblaze_1_1Dependency.html" title="Lifetime dependency on a singleton object.The Dependency template class represents a lifetime depende...">Dependency</a> template, any class can by either public or non-public inheritance or composition define a single or multiple lifetime dependencies on one or several singletons, which guarantees that the singleton instance(s) will be destroyed after the dependent object. The following example demonstrates both the inheritance as well as the composition approach:  <a href="../../d4/d31/classblaze_1_1Dependency.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html">blaze::Singleton&lt; T, D1, D2, D3, D4, D5, D6, D7, D8 &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for all lifetime managed singletons.The <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class represents the base class for all lifetime managed singletons of the Blaze library. Classes, which are supposed to be implemented in terms of the singleton pattern, only have to derive from this class in order to gain all basic characteristics of a singleton:  <a href="../../d4/d8d/classblaze_1_1Singleton.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2343700898ec2ffeded17586c1bf51de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/daf/group__singleton.html#ga2343700898ec2ffeded17586c1bf51de">BLAZE_DETECT_CYCLIC_LIFETIME_DEPENDENCY</a>(T)</td></tr>
<tr class="memdesc:ga2343700898ec2ffeded17586c1bf51de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constraint on the data type.In case the given data type <em>T</em> is not an integral data type, a compilation error is created.  <a href="#ga2343700898ec2ffeded17586c1bf51de"></a><br/></td></tr>
<tr class="separator:ga2343700898ec2ffeded17586c1bf51de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ebbdd354e1f14ddca9e29b0473c6f22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/daf/group__singleton.html#ga1ebbdd354e1f14ddca9e29b0473c6f22">BLAZE_BEFRIEND_SINGLETON</a></td></tr>
<tr class="memdesc:ga1ebbdd354e1f14ddca9e29b0473c6f22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Friendship declaration for the Singleton class template.This macro has to be used in order to declare the Singleton functionality as friend of the class deriving from Singleton.  <a href="#ga1ebbdd354e1f14ddca9e29b0473c6f22"></a><br/></td></tr>
<tr class="separator:ga1ebbdd354e1f14ddca9e29b0473c6f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="motivation"></a>
Motivation</h1>
<p>The singleton design pattern is one of the most popular and most important design patterns available. It can be used to ensures that a specific class has only exactly one instance, and provides a global access point to this instance [1,2]. Additionally, via the singleton pattern it is posssible to manage the lifetime of objects, and especially the lifetime dependencies between several objects.<br/>
</p>
<p>In the Blaze library the singleton pattern is realized by the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class template. Classes that are supposed to be implemented in terms of the singleton pattern only have to derive from this class in order to gain all necessary characteristics of a singleton:</p>
<ul>
<li>non-copyability via the <a class="el" href="../../dd/dbc/classblaze_1_1NonCopyable.html" title="Base class for non-copyable class instances.The NonCopyable class is intended to work as a base class...">NonCopyable</a> base class</li>
<li>a single point of access via the thread-safe [3,4] instance() member function</li>
<li>explicit specification of lifetime dependencies; this feature provides a controlled order of destruction of all singleton objects depending on a non-cyclic dependency tree [4,5]</li>
<li>compile time detection of cyclic lifetime dependencies</li>
</ul>
<p>The only precondition on classes deriving from the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class is the availability of a default constructor. In case it is not possible to instantiate the class via a default constructor, i.e., in case the class has only constructors that require at least a single argument, the Blaze <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> implementation cannot be used!</p>
<h1><a class="anchor" id="usage"></a>
Usage of the Singleton</h1>
<p>In order to make a specific class a singleton, two modifications have to be applied to this class:</p>
<ol type="1">
<li>The class has to derive (publicly or non-publicly) from the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class. In case the class derives publicly the instance() member function, which the class inherits from the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class, is publicly accessible and provides a point of access to the singleton instance. In case the class derives non-publicly, the instance() function is not publicly accessible and therefore the class has to provide another point of access to the singleton instance.<br/>
 The first template parameter has to be the class itself. The following template parameters define lifetime dependencies of this class, i.e., specify on which singleton instances the class depends. It is possible to specify up to 8 lifetime dependencies. The example below demonstrates this for the World class, which is solely depending on the Logger class, which represents the core of the Blaze logging functionality.</li>
<li>The class needs to befriend the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> via the blaze::BLAZE_BEFRIEND_SINGLETON macro. This macro provides a convenient way to express this friendship relation and works both in case the class derives publicly or non-publicly from the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class. This friendship is necessary since in order to guarantee the uniqueness of the singleton instance the constructor of the deriving class must be declared in a non-public section of the class definition. However, in order for the <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> class to provide the instance() function, the constructor must be accessible. This is achieved by the blaze::BLAZE_BEFRIEND_SINGLETON macro. The following example demonstrates this by means of the World class:</li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">class </span>World : <span class="keyword">private</span> Singleton&lt;World,Logger&gt;</div>
<div class="line">{</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">   World();</div>
<div class="line"></div>
<div class="line">   ...</div>
<div class="line">   <a class="code" href="../../d5/daf/group__singleton.html#ga1ebbdd354e1f14ddca9e29b0473c6f22" title="Friendship declaration for the Singleton class template.This macro has to be used in order to declare...">BLAZE_BEFRIEND_SINGLETON</a>;</div>
<div class="line">   ...</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="references"></a>
References</h1>
<p>[1] E. Gamma, R. Helm, R.E. Johnson, J.M. Vlissides: Design Patterns, Addison-Wesley Professional Computing Series, 2008, ISBN: 978-0-201-63361-0<br/>
 [2] S. Meyers: Effective C++, Third Edition, Addison-Wesley Professional Computing Series, 2008, ISBN: 978-0-321-33487-9<br/>
 [3] J. Ringle: <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> Creation the Thread-safe Way, Dr. Dobb's (www.drdobbs.com), 1999<br/>
 [4] A. Alexandrescu: Modern C++ Design, Generic Programming and Design Patterns Applied, Addison-Wesley, 2001, ISBN: 978-0201704310<br/>
 [5] E. Gabrilovich: Controlling the Destruction Order of <a class="el" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">Singleton</a> Objects, Dr. Dobbs (www.drdobbs.com), 1999<br/>
 </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga1ebbdd354e1f14ddca9e29b0473c6f22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLAZE_BEFRIEND_SINGLETON</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span> &gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d4/d8d/classblaze_1_1Singleton.html" title="Base class for all lifetime managed singletons.The Singleton class represents the base class for all ...">blaze::Singleton</a>; \</div>
<div class="line">   template&lt; typename, typename, bool &gt; <span class="keyword">friend</span> <span class="keyword">struct </span>blaze::HasCyclicDependency; \</div>
<div class="line">   template&lt; typename &gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d4/d31/classblaze_1_1Dependency.html" title="Lifetime dependency on a singleton object.The Dependency template class represents a lifetime depende...">blaze::Dependency</a>;</div>
</div><!-- fragment -->
<p>Friendship declaration for the Singleton class template.This macro has to be used in order to declare the Singleton functionality as friend of the class deriving from Singleton. </p>

</div>
</div>
<a class="anchor" id="ga2343700898ec2ffeded17586c1bf51de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLAZE_DETECT_CYCLIC_LIFETIME_DEPENDENCY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">T</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">typedef \</div>
<div class="line">      blaze::CYCLIC_LIFETIME_DEPENDENCY_TEST&lt; \</div>
<div class="line">         blaze::CYCLIC_LIFETIME_DEPENDENCY_DETECTED&lt; blaze::HasCyclicDependency&lt;T,blaze::NullType&gt;::value &gt;::value &gt; \</div>
<div class="line">      BLAZE_JOIN( DETECT_CYCLIC_LIFETIME_DEPENDENCY_TYPEDEF, __LINE__ )</div>
</div><!-- fragment -->
<p>Constraint on the data type.In case the given data type <em>T</em> is not an integral data type, a compilation error is created. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 20 2013 08:14:41 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
